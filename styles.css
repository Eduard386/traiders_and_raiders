:root{
    --bg:#f2e9d6;
    --ink:#1a1a1a;
    --cheap:#1f6feb; /* 1 */
    --exp:#d7263d;   /* 3 */
    --muted:#555;
    --card:#fffaf0;
    --border:#a68b5b;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:var(--ink); background:var(--bg);
  }
  header{
    padding:12px; display:flex; flex-direction:column; align-items:center; gap:12px;
  }
  .game-title{
    font-size:36px; font-weight:bold; color:var(--ink);
    text-align:center; letter-spacing:3px;
    text-shadow:2px 2px 4px rgba(0,0,0,0.4);
    margin:0; line-height:1.2;
  }
  #dayCounter{
    font-size:20px; font-weight:normal; 
    color:var(--ink); opacity:0.7;
    text-shadow:1px 1px 2px rgba(0,0,0,0.2);
    letter-spacing:1px;
  }
  .controls-container{
    display:grid; grid-template-columns:1fr 1fr; gap:12px; padding:20px 12px;
  }
  .controls{
    display:flex; align-items:center;
  }
  .controls:first-child{
    justify-content:flex-end; /* Кнопка прижата к правому краю левой колонки */
  }
  .controls:last-child{
    justify-content:flex-start; /* Кнопка прижата к левому краю правой колонки */
  }
  /* Вариант 1: Пергаментные свитки */
  button{
    padding:16px 24px; font-size:16px; font-weight:bold; font-family: inherit;
    border:none; border-radius:8px; cursor:pointer; position:relative;
    background:linear-gradient(145deg, #f4e4bc, #e8d5a3);
    color:#5a4a2a; text-shadow:1px 1px 2px rgba(0,0,0,0.1);
    box-shadow:0 4px 8px rgba(0,0,0,0.2), inset 0 1px 2px rgba(255,255,255,0.3);
    transition:all 0.3s ease;
    border:2px solid #c9b899;
    width:220px; /* Фиксированная ширина для обеих кнопок */
    letter-spacing:1px; line-height:1.1; text-transform:uppercase;
  }
  button::before{
    content:""; position:absolute; top:-2px; left:-2px; right:-2px; bottom:-2px;
    background:linear-gradient(45deg, #8B4513, #A0522D, #CD853F, #D2B48C);
    border-radius:10px; z-index:-1; opacity:0.7;
  }
  button:hover{
    transform:translateY(-2px); 
    box-shadow:0 6px 12px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.4);
    background:linear-gradient(145deg, #f6e6be, #ebd7a5);
  }
  button:active{
    transform:translateY(0px);
    box-shadow:0 2px 4px rgba(0,0,0,0.2), inset 0 1px 2px rgba(255,255,255,0.2);
  }
  button.primary{
    background:linear-gradient(145deg, #d4b896, #c4a882);
    color:#3a2f1a; border-color:#a68b5b;
  }
  button.primary:hover{
    background:linear-gradient(145deg, #d6ba98, #c6aa84);
  }

  /* Эффект частиц для кнопок */
  .particle {
    position: absolute;
    pointer-events: none;
    background: radial-gradient(circle, #ffd700 0%, #ffed4e 50%, transparent 100%);
    border-radius: 50%;
    animation: particleExplosion 1s ease-out forwards;
  }

  @keyframes particleExplosion {
    0% {
      transform: scale(0) translateY(0);
      opacity: 1;
    }
    40% {
      transform: scale(1) translateY(-40px) translateX(var(--x-offset));
      opacity: 1;
    }
    100% {
      transform: scale(1) translateY(60px) translateX(var(--x-offset));
      opacity: 0;
    }
  }
  #raidResult{min-width:160px; font-weight:600; font-size:14px; letter-spacing:0.5px;}
  
  .grid{
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap:12px; padding:12px;
  }
  .city{
    background:var(--card); border:3px solid rgba(0,0,0,0.5); border-radius:16px;
    padding:16px; display:flex; flex-direction:column; gap:8px;
    min-height: 240px; position:relative; overflow:hidden;
    box-shadow: 0 8px 24px rgba(0,0,0,0.2), 
                0 4px 12px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.15),
                0 0 0 1px rgba(255,255,255,0.15);
    transition: all 0.3s ease;
  }
  .city:hover{
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0,0,0,0.25), 
                0 6px 16px rgba(0,0,0,0.2),
                inset 0 1px 0 rgba(255,255,255,0.25),
                0 0 0 2px rgba(255,255,255,0.25);
    border-color: rgba(0,0,0,0.6);
  }
  .location-bg{
    position:absolute; top:0; left:0; right:0; bottom:0;
    background-size:cover; background-position:center; background-repeat:no-repeat;
    opacity:0.8; z-index:0;
  }
  
  /* Эффект дыма/тумана на локациях */
  .city::after{
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(ellipse 80% 40% at 20% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
      radial-gradient(ellipse 60% 30% at 80% 70%, rgba(255,255,255,0.2) 0%, transparent 60%),
      radial-gradient(ellipse 40% 20% at 50% 50%, rgba(255,255,255,0.15) 0%, transparent 60%);
    z-index: 1;
    pointer-events: none;
    animation: fogDrift 15s ease-in-out infinite;
    /* Временная отладка - яркий цвет для проверки */
    /* background: rgba(255, 0, 0, 0.3); */
  }
  
  /* Эффект смены дня и ночи */
  .day-night-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 999;
    pointer-events: none;
    opacity: 0;
    visibility: visible;
    transition: opacity 2s ease;
  }
  
  .day-night-overlay.active {
    opacity: 1;
  }
  
  .night-effect {
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.9) 0%,
      rgba(0, 0, 0, 0.8) 50%,
      rgba(0, 0, 0, 0.9) 100%
    );
  }
  
  .dawn-effect {
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to bottom,
      rgba(255, 165, 0, 0.6) 0%,
      rgba(255, 200, 100, 0.4) 30%,
      rgba(255, 255, 200, 0.3) 70%,
      rgba(255, 255, 255, 0.2) 100%
    );
  }
  
  /* @keyframes roosterCrow {
    0%, 100% {
      transform: scale(1);
      opacity: 0;
    }
    20% {
      transform: scale(1.1);
      opacity: 1;
    }
    80% {
      transform: scale(1.05);
      opacity: 0.8;
    }
  }
  
  .rooster-sound {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
    font-size: 48px;
    color: #ff6b35;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    animation: roosterCrow 2s ease-in-out;
    pointer-events: none;
  } */
  
  @keyframes fogDrift {
    0%, 100% {
      transform: translateX(-8px) translateY(-4px);
      opacity: 0.3;
    }
    25% {
      transform: translateX(12px) translateY(-8px);
      opacity: 0.5;
    }
    50% {
      transform: translateX(6px) translateY(8px);
      opacity: 0.4;
    }
    75% {
      transform: translateX(-12px) translateY(4px);
      opacity: 0.6;
    }
  }
            .city .row{
            position:relative; z-index:2; padding-top:60px;
          }
  .row{display:flex; flex-wrap:wrap; gap:6px; justify-content:center; align-items:center; min-height:120px}
  
  /* Новые стили для товаров - Вариант 3 */
  .token{
    padding:0; border:3px solid var(--border); border-radius:16px; 
    background:rgba(255,255,255,0.9); display:inline-block; line-height:0; 
    position:relative; 
    box-shadow: 0 6px 16px rgba(0,0,0,0.15),
                0 2px 8px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.3);
    transition:all 0.3s ease;
    opacity:0; /* Изначально невидимый */
    transform:scale(0.7); /* Изначально уменьшенный */
  }
  .token:hover{
    transform:translateY(-3px) scale(1.02);
    box-shadow: 0 12px 24px rgba(0,0,0,0.2),
                0 4px 12px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.4);
  }
  .good-image{
    width:90px; height:90px; object-fit:contain;
    border-radius:13px; display:block;
  }
  .token.cheap{
    border-color:#c21e47; 
    background:linear-gradient(135deg, rgba(194,30,71,0.15), rgba(255,255,255,0.95));
    box-shadow: 0 6px 16px rgba(194,30,71,0.5),
                0 2px 8px rgba(194,30,71,0.3),
                inset 0 1px 0 rgba(255,255,255,0.4);
  }
  .token.cheap::before{
    content:"↓"; position:absolute; top:-8px; right:-8px;
    background:#c21e47; color:white; border-radius:50%; width:26px; height:26px;
    display:flex; align-items:center; justify-content:center; font-size:16px; font-weight:bold;
    box-shadow: 0 3px 8px rgba(194,30,71,0.6),
                0 1px 4px rgba(194,30,71,0.4);
  }
  .token.exp{
    border-color:#1e7e34; 
    background:linear-gradient(135deg, rgba(30,126,52,0.15), rgba(255,255,255,0.95));
    box-shadow: 0 6px 16px rgba(30,126,52,0.5),
                0 2px 8px rgba(30,126,52,0.3),
                inset 0 1px 0 rgba(255,255,255,0.4);
  }
  .token.exp::before{
    content:"↑"; position:absolute; top:-8px; right:-8px;
    background:#1e7e34; color:white; border-radius:50%; width:26px; height:26px;
    display:flex; align-items:center; justify-content:center; font-size:16px; font-weight:bold;
    box-shadow: 0 3px 8px rgba(30,126,52,0.6),
                0 1px 4px rgba(30,126,52,0.4);
  }

  /* Оверлей для засады */
  .raid-overlay{
    position:fixed; top:0; left:0; right:0; bottom:0;
    background:rgba(0,0,0,0.8); z-index:1000;
    display:flex; align-items:center; justify-content:center;
    opacity:0; visibility:hidden; 
    transition:opacity 0.3s ease, backdrop-filter 0.3s ease;
    backdrop-filter: blur(0px);
  }
  .raid-overlay.active{
    opacity:1; visibility:visible;
    backdrop-filter: blur(8px);
  }
            .raid-image{
            max-width:80%; max-height:80%; object-fit:contain;
            border-radius:20px;
          }
  @keyframes raidPulse{
    0%{transform:scale(0.8); opacity:0}
    20%{transform:scale(1.1); opacity:1}
    80%{transform:scale(1); opacity:1}
    100%{transform:scale(0.8); opacity:0}
  }
  
  @keyframes fadeInScale{
    0%{transform:scale(0.7); opacity:0}
    50%{transform:scale(1.05); opacity:0.7}
    100%{transform:scale(1); opacity:1}
  }
  
  @media (max-width:700px){
    .grid{grid-template-columns:1fr; grid-template-rows:auto}
    .city{min-height:auto}
  }
  