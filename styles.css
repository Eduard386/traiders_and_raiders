:root{
    --bg:#f4ecd8;
    --ink:#2b2b2b;
    --cheap:#1f6feb; /* 1 */
    --exp:#d7263d;   /* 3 */
    --muted:#666;
    --card:#fff9ea;
    --border:#c9b899;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:var(--ink); background:var(--bg);
  }
  header{
    padding:12px; display:flex; flex-direction:column; align-items:center; gap:12px;
  }
  .game-title{
    font-size:32px; font-weight:bold; color:var(--ink);
    text-align:center; letter-spacing:2px;
    text-shadow:2px 2px 4px rgba(0,0,0,0.3);
    margin:0;
  }
  .controls-container{
    display:grid; grid-template-columns:1fr 1fr; gap:12px; padding:20px 12px;
  }
  .controls{
    display:flex; align-items:center;
  }
  .controls:first-child{
    justify-content:flex-end; /* Кнопка прижата к правому краю левой колонки */
  }
  .controls:last-child{
    justify-content:flex-start; /* Кнопка прижата к левому краю правой колонки */
  }
  /* Вариант 1: Пергаментные свитки */
  button{
    padding:14px 20px; font-size:16px; font-weight:bold; font-family: inherit;
    border:none; border-radius:8px; cursor:pointer; position:relative;
    background:linear-gradient(145deg, #f4e4bc, #e8d5a3);
    color:#5a4a2a; text-shadow:1px 1px 2px rgba(0,0,0,0.1);
    box-shadow:0 4px 8px rgba(0,0,0,0.2), inset 0 1px 2px rgba(255,255,255,0.3);
    transition:all 0.3s ease;
    border:2px solid #c9b899;
    width:160px; /* Фиксированная ширина для обеих кнопок */
  }
  button::before{
    content:""; position:absolute; top:-2px; left:-2px; right:-2px; bottom:-2px;
    background:linear-gradient(45deg, #8B4513, #A0522D, #CD853F, #D2B48C);
    border-radius:10px; z-index:-1; opacity:0.7;
  }
  button:hover{
    transform:translateY(-2px); 
    box-shadow:0 6px 12px rgba(0,0,0,0.3), inset 0 1px 2px rgba(255,255,255,0.4);
    background:linear-gradient(145deg, #f6e6be, #ebd7a5);
  }
  button:active{
    transform:translateY(0px);
    box-shadow:0 2px 4px rgba(0,0,0,0.2), inset 0 1px 2px rgba(255,255,255,0.2);
  }
  button.primary{
    background:linear-gradient(145deg, #d4b896, #c4a882);
    color:#3a2f1a; border-color:#a68b5b;
  }
  button.primary:hover{
    background:linear-gradient(145deg, #d6ba98, #c6aa84);
  }

  /* Эффект частиц для кнопок */
  .particle {
    position: absolute;
    pointer-events: none;
    background: radial-gradient(circle, #ffd700 0%, #ffed4e 50%, transparent 100%);
    border-radius: 50%;
    animation: particleExplosion 1s ease-out forwards;
  }

  @keyframes particleExplosion {
    0% {
      transform: scale(0) translateY(0);
      opacity: 1;
    }
    40% {
      transform: scale(1) translateY(-40px) translateX(var(--x-offset));
      opacity: 1;
    }
    100% {
      transform: scale(1) translateY(60px) translateX(var(--x-offset));
      opacity: 0;
    }
  }
  #raidResult{min-width:160px; font-weight:600}
  
  .grid{
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap:12px; padding:12px;
  }
  .city{
    background:var(--card); border:2px solid var(--border); border-radius:12px;
    padding:12px; display:flex; flex-direction:column; gap:8px;
    min-height: 240px; position:relative; overflow:hidden;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15), 
                0 4px 12px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.1);
    transition: all 0.3s ease;
  }
  .city:hover{
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0,0,0,0.2), 
                0 6px 16px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.2);
  }
  .location-bg{
    position:absolute; top:0; left:0; right:0; bottom:0;
    background-size:cover; background-position:center; background-repeat:no-repeat;
    opacity:0.8; z-index:0;
  }
            .city .row{
            position:relative; z-index:1; padding-top:60px;
          }
  .row{display:flex; flex-wrap:wrap; gap:6px; justify-content:center; align-items:center; min-height:120px}
  
  /* Новые стили для товаров - Вариант 3 */
  .token{
    padding:0; border:3px solid var(--border); border-radius:16px; 
    background:rgba(255,255,255,0.9); display:inline-block; line-height:0; 
    position:relative; 
    box-shadow: 0 6px 16px rgba(0,0,0,0.15),
                0 2px 8px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.3);
    transition:all 0.3s ease;
    opacity:0; /* Изначально невидимый */
    transform:scale(0.7); /* Изначально уменьшенный */
  }
  .token:hover{
    transform:translateY(-3px) scale(1.02);
    box-shadow: 0 12px 24px rgba(0,0,0,0.2),
                0 4px 12px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.4);
  }
  .good-image{
    width:90px; height:90px; object-fit:contain;
    border-radius:13px; display:block;
  }
  .token.cheap{
    border-color:#d7263d; 
    background:linear-gradient(135deg, rgba(215,38,61,0.1), rgba(255,255,255,0.9));
    box-shadow: 0 6px 16px rgba(215,38,61,0.4),
                0 2px 8px rgba(215,38,61,0.2),
                inset 0 1px 0 rgba(255,255,255,0.3);
  }
  .token.cheap::before{
    content:"↓"; position:absolute; top:-8px; right:-8px;
    background:#d7263d; color:white; border-radius:50%; width:24px; height:24px;
    display:flex; align-items:center; justify-content:center; font-size:14px; font-weight:bold;
    box-shadow: 0 3px 8px rgba(215,38,61,0.5),
                0 1px 4px rgba(215,38,61,0.3);
  }
  .token.exp{
    border-color:#28a745; 
    background:linear-gradient(135deg, rgba(40,167,69,0.1), rgba(255,255,255,0.9));
    box-shadow: 0 6px 16px rgba(40,167,69,0.4),
                0 2px 8px rgba(40,167,69,0.2),
                inset 0 1px 0 rgba(255,255,255,0.3);
  }
  .token.exp::before{
    content:"↑"; position:absolute; top:-8px; right:-8px;
    background:#28a745; color:white; border-radius:50%; width:24px; height:24px;
    display:flex; align-items:center; justify-content:center; font-size:14px; font-weight:bold;
    box-shadow: 0 3px 8px rgba(40,167,69,0.5),
                0 1px 4px rgba(40,167,69,0.3);
  }

  /* Оверлей для засады */
  .raid-overlay{
    position:fixed; top:0; left:0; right:0; bottom:0;
    background:rgba(0,0,0,0.7); z-index:1000;
    display:flex; align-items:center; justify-content:center;
    opacity:0; visibility:hidden; transition:opacity 0.3s ease;
  }
  .raid-overlay.active{
    opacity:1; visibility:visible;
  }
            .raid-image{
            max-width:80%; max-height:80%; object-fit:contain;
            border-radius:20px;
          }
  @keyframes raidPulse{
    0%{transform:scale(0.8); opacity:0}
    20%{transform:scale(1.1); opacity:1}
    80%{transform:scale(1); opacity:1}
    100%{transform:scale(0.8); opacity:0}
  }
  
  @keyframes fadeInScale{
    0%{transform:scale(0.7); opacity:0}
    50%{transform:scale(1.05); opacity:0.7}
    100%{transform:scale(1); opacity:1}
  }
  
  @media (max-width:700px){
    .grid{grid-template-columns:1fr; grid-template-rows:auto}
    .city{min-height:auto}
  }
  